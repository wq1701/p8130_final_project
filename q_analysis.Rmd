---
title: "bm project_update 12/11/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
```

```{r}
# 文献参考
# 1: The Gender Gap in Salaries of Educational Administration Professors
# 可参考变量： 
# - academic rank 
# - years of experience as a professor
# - research productivity measures 里面的number of books written or edited(可以Publication做比较？)
# - current academic year salary
# - gender
# 
# 2. Pay Structure, Female Representation and the Gender Pay Gap among University Professors
# 可参考变量： 
# - department

# 常见： experience, rank
# 存在： publication rate, department
```

```{r}
law_df = read_csv("./data/Lawsuit.csv") %>% 
  janitor::clean_names() %>% 
  mutate(mean_sal = (sal94 + sal95)/2) %>% 
  mutate(
    gender = as.factor(gender),
    dept = as.factor(dept),
    clin = as.factor(clin),
    cert = as.factor(cert),
    rank = as.factor(rank)
  ) %>% 
  mutate(gender = factor(gender, levels = c(0,1), labels = c("Female", "Male")),
         dept = factor(dept, levels = c(6,1,2,3,4,5), 
                       labels = c("Surgery", "Biochemistry/Molecular Biology", "Physiology", "Genetics", "Pediatrics", "Medicine")),
         clin = factor(clin, levels = c(0,1), labels = c("Primarily research emphasis", "Primarily clinical emphasis")),
         cert = factor(cert, levels = c(0,1), labels = c("not certified", "Board certified")),
         rank = factor(rank, levels = c(3,1,2), labels = c("Full professor", "Assistant", "Associate")))

```

first, fit only gender in the model
```{r}
model_0 = lm(mean_sal~gender, data = law_df)
```

see if a variable is a confounder (lec 15, page 29; epi lec 7, page 69)

```{r dept confounder}
model_dept = lm(mean_sal~gender + dept, data = law_df)

anova(model_0, model_dept)

# include in the model
```

```{r rank confd}
model_rank = lm(mean_sal~gender + rank, data = law_df)

# summary(model_rank)

anova(model_0, model_rank)

# not a confounder
```

```{r prate confd}
model_prate = lm(mean_sal~gender + prate, data = law_df)

anova(model_0, model_prate)

# result: include prate in the model
```

```{r exper confd}
model_exper = lm(mean_sal~gender + exper, data = law_df)

anova(model_0, model_exper)

# result: include prate in the model
```

